# 启动检查清单

在启动系统前，请确保完成以下检查。

---

## 📋 基础配置检查

### 1. 环境依赖
- [ ] Python 3.7+ 已安装
- [ ] 已安装项目依赖：`pip3 install -r requirements.txt`
- [ ] 已安装 Playwright：`python3 -m playwright install chromium`

### 2. Whop 配置
- [ ] `.env` 文件已创建（从 `.env.example` 复制）
- [ ] `WHOP_EMAIL` 已填写
- [ ] `WHOP_PASSWORD` 已填写
- [ ] 账号可以正常登录 Whop 网页版

### 3. 长桥 API 配置
- [ ] 已开通长桥账户
- [ ] 已获取 API 凭证（App Key、App Secret、Access Token）
- [ ] 已在 `.env` 中填写对应凭证
- [ ] `LONGPORT_MODE` 已设置（paper 或 real）
- [ ] `LONGPORT_REGION` 已设置（建议 cn）

---

## 🧪 测试检查（重要！）

### 基础测试
- [ ] 运行 `python3 test_longport_integration.py` - 所有测试通过
- [ ] 运行 `python3 test_position_management.py` - 所有测试通过
- [ ] 运行 `python3 main.py --test` - 解析器测试正常

### 连接测试
- [ ] 可以连接长桥 API
- [ ] 可以获取账户信息
- [ ] 可以查询订单和持仓

---

## 🎛️ 交易配置检查

### 模拟账户（推荐新手）
- [ ] `LONGPORT_MODE=paper`
- [ ] 已填写模拟账户凭证
- [ ] `LONGPORT_AUTO_TRADE=true`（如需自动交易）
- [ ] `LONGPORT_DRY_RUN=false`（模拟账户可以放心关闭）

### 真实账户（谨慎！）
- [ ] 已在模拟账户测试至少 2-4 周
- [ ] 策略胜率 > 60%
- [ ] 最大回撤 < 10%
- [ ] `LONGPORT_MODE=real`
- [ ] 已填写真实账户凭证
- [ ] `LONGPORT_AUTO_TRADE=true`
- [ ] `LONGPORT_DRY_RUN=false`
- [ ] ⚠️ 理解所有风险并愿意承担损失

---

## ⚠️ 风险控制检查

- [ ] `LONGPORT_MAX_POSITION_RATIO` 已设置（建议 0.10-0.20）
- [ ] `LONGPORT_MAX_DAILY_LOSS` 已设置（建议 0.03-0.05）
- [ ] `LONGPORT_MIN_ORDER_AMOUNT` 已设置（建议 >= 100）
- [ ] 理解止损止盈机制
- [ ] 理解移动止损机制

---

## 📊 监控准备

### 日志
- [ ] `logs/` 目录已创建
- [ ] 有足够磁盘空间存储日志

### 数据
- [ ] `data/` 目录已创建
- [ ] 了解持仓数据存储位置

### 监控工具
- [ ] 知道如何查看日志：`tail -f logs/trading.log`
- [ ] 知道如何查看持仓
- [ ] 知道如何手动干预

---

## 🚀 启动前最后检查

### 安全确认
- [ ] ✅ `.env` 文件**不会**提交到 Git
- [ ] ✅ API 凭证已妥善保管
- [ ] ✅ 理解真实账户的风险
- [ ] ✅ 从小仓位开始（如使用真实账户）

### 系统状态
- [ ] ✅ 网络连接稳定
- [ ] ✅ 系统资源充足（CPU、内存）
- [ ] ✅ 可以持续运行（或使用 screen/tmux）

### 紧急预案
- [ ] ✅ 知道如何停止程序（Ctrl+C）
- [ ] ✅ 知道如何查看日志
- [ ] ✅ 知道如何手动平仓
- [ ] ✅ 有长桥 App 可以随时查看账户

---

## ✅ 启动命令

确认上述所有检查项后，运行：

```bash
python3 main.py
```

---

## 📱 运行中监控

### 每小时检查
- [ ] 程序正常运行
- [ ] 无严重错误日志
- [ ] 网络连接正常

### 每天检查
- [ ] 查看持仓和盈亏
- [ ] 查看当日订单
- [ ] 查看账户余额
- [ ] 备份重要数据

### 每周检查
- [ ] 分析交易表现
- [ ] 优化策略参数
- [ ] 更新止损止盈规则
- [ ] 检查 API 密钥有效期

---

## 🆘 紧急情况处理

### 程序崩溃
1. 查看日志：`tail -100 logs/trading.log`
2. 检查网络连接
3. 重启程序
4. 如持续崩溃，使用 Dry Run 模式排查

### 订单异常
1. 登录长桥 App 查看实际订单
2. 检查日志中的订单 ID
3. 必要时手动撤单或平仓
4. 暂停自动交易排查问题

### 行情异常
1. 检查行情权限
2. 验证 API 连接
3. 查看长桥 API 状态页

### 持仓异常
1. 从券商同步持仓
2. 对比本地数据和券商数据
3. 手动修正不一致的持仓

---

## 📞 获取帮助

- 📖 查看文档：`USAGE_GUIDE.md`
- 🐛 报告问题：GitHub Issues
- 💬 技术讨论：长桥 OpenAPI 社区

---

## ✅ 准备就绪！

当所有检查项都完成后，您就可以开始使用系统了。

**记住**：
1. 🧪 先在模拟账户充分测试
2. 💰 从小仓位开始
3. 📉 严格执行止损
4. 👀 定期监控和优化
5. 🎓 持续学习和改进

**祝交易顺利！** 📈
