# é•¿æ¡¥ OpenAPI å¿«é€Ÿå¼€å§‹

5 åˆ†é’Ÿå¿«é€Ÿé›†æˆé•¿æ¡¥è¯åˆ¸ APIï¼Œå®žçŽ°æœŸæƒè‡ªåŠ¨äº¤æ˜“ã€‚

## ç¬¬ 1 æ­¥ï¼šèŽ·å– API å‡­è¯

### æ¨¡æ‹Ÿè´¦æˆ·ï¼ˆæŽ¨èæ–°æ‰‹ï¼‰

1. è®¿é—® [LongPort OpenAPI](https://open.longportapp.com)
2. ç™»å½•åŽè¿›å…¥ã€Œä¸ªäººä¸­å¿ƒã€â†’ã€Œæ¨¡æ‹Ÿäº¤æ˜“ã€
3. å¤åˆ¶ä»¥ä¸‹å‡­è¯ï¼š
   - App Key
   - App Secret
   - Access Token

### çœŸå®žè´¦æˆ·ï¼ˆè°¨æ…Žï¼ï¼‰

1. åœ¨ã€Œä¸ªäººä¸­å¿ƒã€â†’ã€Œå®žç›˜äº¤æ˜“ã€
2. å¤åˆ¶çœŸå®žè´¦æˆ·çš„ API å‡­è¯

## ç¬¬ 2 æ­¥ï¼šé…ç½®çŽ¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼ˆä»Ž `.env.example` å¤åˆ¶ï¼‰ï¼š

```bash
cp .env.example .env
```

### æ¨¡æ‹Ÿè´¦æˆ·é…ç½®

```env
# è´¦æˆ·æ¨¡å¼ï¼špaperï¼ˆæ¨¡æ‹Ÿï¼‰æˆ– realï¼ˆçœŸå®žï¼‰
LONGPORT_MODE=paper

# æ¨¡æ‹Ÿè´¦æˆ·å‡­è¯
LONGPORT_PAPER_APP_KEY=ç²˜è´´ä½ çš„_APP_KEY
LONGPORT_PAPER_APP_SECRET=ç²˜è´´ä½ çš„_APP_SECRET
LONGPORT_PAPER_ACCESS_TOKEN=ç²˜è´´ä½ çš„_ACCESS_TOKEN

# äº¤æ˜“è®¾ç½®
LONGPORT_AUTO_TRADE=true   # å¯ç”¨è‡ªåŠ¨äº¤æ˜“
LONGPORT_DRY_RUN=false     # å…³é—­ dry_runï¼ˆæ¨¡æ‹Ÿè´¦æˆ·å®‰å…¨ï¼‰
LONGPORT_REGION=cn         # ä¸­å›½å¤§é™†ç”¨æˆ·
```

### çœŸå®žè´¦æˆ·é…ç½®

âš ï¸ **å»ºè®®å…ˆåœ¨æ¨¡æ‹Ÿè´¦æˆ·æµ‹è¯• 2-4 å‘¨ï¼**

```env
# åˆ‡æ¢åˆ°çœŸå®žè´¦æˆ·
LONGPORT_MODE=real

# çœŸå®žè´¦æˆ·å‡­è¯
LONGPORT_REAL_APP_KEY=ç²˜è´´ä½ çš„_APP_KEY
LONGPORT_REAL_APP_SECRET=ç²˜è´´ä½ çš„_APP_SECRET
LONGPORT_REAL_ACCESS_TOKEN=ç²˜è´´ä½ çš„_ACCESS_TOKEN

# äº¤æ˜“è®¾ç½®
LONGPORT_AUTO_TRADE=true
LONGPORT_DRY_RUN=false

# é£Žé™©æŽ§åˆ¶ï¼ˆå»ºè®®ä¿å®ˆï¼‰
LONGPORT_MAX_POSITION_RATIO=0.10   # å•ä»“ä½ä¸è¶…è¿‡ 10%
LONGPORT_MAX_DAILY_LOSS=0.03       # å•æ—¥æ­¢æŸ 3%
LONGPORT_MIN_ORDER_AMOUNT=100      # æœ€å°ä¸‹å• $100
```

## ç¬¬ 3 æ­¥ï¼šæµ‹è¯•è¿žæŽ¥

```bash
python3 test_longport_integration.py
```

çœ‹åˆ°ç±»ä¼¼è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š

```
============================================================
é•¿æ¡¥ OpenAPI é…ç½®æ‘˜è¦
============================================================
è´¦æˆ·æ¨¡å¼:     ðŸ§ª æ¨¡æ‹Ÿè´¦æˆ·
è‡ªåŠ¨äº¤æ˜“:     âœ… å·²å¯ç”¨
æ¨¡æ‹Ÿè¿è¡Œ:     âŒ æœªå¯ç”¨
API åŒºåŸŸ:     cn

è´¦æˆ·ä¿¡æ¯:
  å¸ç§: USD, æ€»èµ„é‡‘: 100,000.00
  
âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼
```

## ç¬¬ 4 æ­¥ï¼šå¯åŠ¨è‡ªåŠ¨äº¤æ˜“

```bash
python3 main.py
```

ç¨‹åºä¼šï¼š
1. ç›‘æŽ§ Whop é¡µé¢èŽ·å–äº¤æ˜“ä¿¡å·
2. è§£æžæœŸæƒæŒ‡ä»¤
3. è‡ªåŠ¨é€šè¿‡é•¿æ¡¥ API ä¸‹å•

## å¸¸è§æ¨¡å¼

### æ¨¡å¼ 1ï¼šåªç›‘æŽ§ä¸äº¤æ˜“

```env
LONGPORT_AUTO_TRADE=false
```

### æ¨¡å¼ 2ï¼šDry Runï¼ˆæ‰“å°æ—¥å¿—ä¸å®žé™…ä¸‹å•ï¼‰

```env
LONGPORT_AUTO_TRADE=true
LONGPORT_DRY_RUN=true
```

### æ¨¡å¼ 3ï¼šæ¨¡æ‹Ÿè´¦æˆ·è‡ªåŠ¨äº¤æ˜“ï¼ˆæŽ¨èæµ‹è¯•ï¼‰

```env
LONGPORT_MODE=paper
LONGPORT_AUTO_TRADE=true
LONGPORT_DRY_RUN=false
```

### æ¨¡å¼ 4ï¼šçœŸå®žè´¦æˆ·è‡ªåŠ¨äº¤æ˜“ï¼ˆè°¨æ…Žï¼ï¼‰

```env
LONGPORT_MODE=real
LONGPORT_AUTO_TRADE=true
LONGPORT_DRY_RUN=false
```

## å¿«é€Ÿåˆ‡æ¢è´¦æˆ·

åªéœ€ä¿®æ”¹ä¸€ä¸ªå˜é‡ï¼š

```bash
# åˆ‡æ¢åˆ°æ¨¡æ‹Ÿè´¦æˆ·
LONGPORT_MODE=paper

# åˆ‡æ¢åˆ°çœŸå®žè´¦æˆ·
LONGPORT_MODE=real
```

ç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨å¯¹åº”çš„ API å‡­è¯ã€‚

## æ£€æŸ¥ç‚¹æ¸…å•

åœ¨å¯åŠ¨çœŸå®žè´¦æˆ·äº¤æ˜“å‰ï¼Œç¡®ä¿ï¼š

- [ ] å·²åœ¨æ¨¡æ‹Ÿè´¦æˆ·æµ‹è¯•è‡³å°‘ 2-4 å‘¨
- [ ] ç­–ç•¥èƒœçŽ‡ > 60%
- [ ] æœ€å¤§å›žæ’¤ < 10%
- [ ] ç†è§£æ‰€æœ‰é£Žé™©æŽ§åˆ¶å‚æ•°
- [ ] é…ç½®äº†åˆç†çš„æ­¢æŸæ­¢ç›ˆ
- [ ] è®¾ç½®äº† `LONGPORT_MAX_DAILY_LOSS`
- [ ] ä»Žå°ä»“ä½å¼€å§‹ï¼ˆ5-10%ï¼‰
- [ ] å·²ä»”ç»†æ£€æŸ¥ `.env` é…ç½®

## æ•…éšœæŽ’é™¤

### é”™è¯¯ï¼šé…ç½®ä¸å®Œæ•´

```
âŒ æ¨¡æ‹Ÿè´¦æˆ·å‡­è¯ä¸å®Œæ•´ï¼
```

**è§£å†³**ï¼šæ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `LONGPORT_PAPER_APP_KEY` ç­‰æ˜¯å¦éƒ½å·²å¡«å†™ã€‚

### é”™è¯¯ï¼šç½‘ç»œè¿žæŽ¥å¤±è´¥

```
âŒ ConnectionError
```

**è§£å†³**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
2. å¦‚æžœåœ¨ä¸­å›½å¤§é™†ï¼Œç¡®ä¿ `LONGPORT_REGION=cn`
3. å°è¯•é‡å¯ç¨‹åº

### é”™è¯¯ï¼šè®¢å•è¢«æ‹’ç»

```
âŒ è®¢å•é‡‘é¢è¿‡å°: $50.00 < $100.00
```

**è§£å†³**ï¼šè°ƒæ•´ `LONGPORT_MIN_ORDER_AMOUNT` æˆ–å¢žåŠ ä»“ä½å¤§å°ã€‚

### é”™è¯¯ï¼šè¡Œæƒ…æƒé™ä¸è¶³

```
âŒ QuotePermissionDenied
```

**è§£å†³**ï¼šåœ¨ LongPort App ä¸­è´­ä¹°å¯¹åº”å¸‚åœºçš„å®žæ—¶è¡Œæƒ…æƒé™ã€‚

## ä¸‹ä¸€æ­¥

- ðŸ“– æŸ¥çœ‹å®Œæ•´æŒ‡å—ï¼š[LONGPORT_INTEGRATION_GUIDE.md](./LONGPORT_INTEGRATION_GUIDE.md)
- ðŸ§ª è¿è¡Œæ›´å¤šæµ‹è¯•ï¼š`python3 test_longport_integration.py`
- ðŸ“Š æŸ¥çœ‹è®¢å•ï¼šåœ¨ LongPort App ä¸­æŸ¥çœ‹
- ðŸ’¬ æŠ€æœ¯æ”¯æŒï¼š[GitHub Issues](https://github.com/longportapp/openapi/issues)

## å®‰å…¨æé†’

1. ðŸ” ä¸è¦å°† `.env` æäº¤åˆ° Git
2. ðŸ”‘ å®šæœŸæ›´æ¢ API å¯†é’¥
3. ðŸ’° ä»Žå°é¢å¼€å§‹ï¼Œé€æ­¥å¢žåŠ 
4. ðŸ“‰ è®¾ç½®åˆç†çš„æ­¢æŸ
5. ðŸ‘€ å®šæœŸæ£€æŸ¥è´¦æˆ·å’Œè®¢å•

---

**ç¥äº¤æ˜“é¡ºåˆ©ï¼** ðŸš€
